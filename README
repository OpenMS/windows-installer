This directory contains all files necessary to create a windows installer from a source build of OpenMS (System A)

additional required software:

- NSIS (NullSoft Installer System)
  - version 3.xx has NOT been tested! If you want to try, please do and report results!
  - download NSIS 2.46 from http://nsis.sourceforge.net
  - copy the content of the 8k string support from http://nsis.sourceforge.net/Special_Builds (Download large strings build)
    build into your NSIS install directory (this should overwrite makensis.exe and Stubs)

##################################################
###   TODO before running OpenMS_installer.nsi ###
##################################################
### copy UAC.dll to your <PATH-to-NSIS>/Plugins directory before running the installer script!
###   otherwise you'll get an error during script compilation: "Invalid command: UAC::RunElevated"
### extract the content of Inettc.zip to your <PATH-to-NSIS> directory before running the installer script!
###   otherwise you'll get an error during script compilation: "Invalid command: inetc::get"

		

Quick guide:
- fully compile and test OpenMS using a Visual Studio Generator (create the targets [OpenMS TOPP UTILS GUI] - NOT MORE!!)
- create the documentation (target "doc" (NOT doc_internal) in OpenMS_build/doc)
  or: copy the doc folder from Linux if setting up documentation on Windows is too hard for you
- read additional install information in the header of OpenMS_installer.nsi (!)
- adapt settings in the header of OpenMS_installer.nsi to your needs
  or: see ./auto_package/*.nsi for example files, which you can just copy and modify.
- compile OpenMS_installer.nsi using NSIS (this should create a file named something like OpenMS_setup.exe)
- distribute


Verify the installer:
- use a VM (System B)
- do NOT assume that successfully installing OpenMS_setup.exe on the system A means that the installer will work
  on a new system (B)! But you can at least check for major quirks.
- check if all files were created and start-menu entries are present and working
- to test the TOPP tools, run TOPPTest_Assembler.pl on System A
  e.g.
	adapt paths within TOPPTest_Assembler.pl
	> open a VS command line:
	> cd c:\<path to win_installer_dir>
  > TOPPTest_Assembler.pl
  	
	Now, copy the folder /OpenMS/source/TEST/TOPP/ to System B and run TOPP_test.bat (which should have been created by the perl script).
	
	Check if the script runs through without pausing (which means that something needs your attention).
	If you´re picky, then check the whole output of the script. Sometimes a TOPP-tool might give a warning
	and still produce the correct result, thus the script will not remind you of that.
	
	
